<html>
  <head>
    <title>Generators</title>
  </head>

  <body>
    <a href="/ejercicios/">Go back</a>
    <p><em>Abre la consola</em></p>

    <script>var _marked = /*#__PURE__*/regeneratorRuntime.mark(simpleGenerator),
    _marked2 = /*#__PURE__*/regeneratorRuntime.mark(idMaker),
    _marked3 = /*#__PURE__*/regeneratorRuntime.mark(idMakerWithReset),
    _marked4 = /*#__PURE__*/regeneratorRuntime.mark(fibonacci);

// Los generadores son funciones de las que se puede salir y volver a entrar.
// Su contexto (asociación de variables) será conservado entre las reentradas.
// Cada vez que llamamos next, la ejecución del generador va a continuar hasta el proximo yield
function simpleGenerator() {
  return regeneratorRuntime.wrap(function simpleGenerator$(_context) {
    while (1) {
      switch (_context.prev = _context.next) {
        case 0:
          console.log('GENERATOR START');
          _context.next = 3;
          return 1;

        case 3:
          _context.next = 5;
          return 2;

        case 5:
          _context.next = 7;
          return 3;

        case 7:
          console.log('GENERATOR END');

        case 8:
        case "end":
          return _context.stop();
      }
    }
  }, _marked);
} // const gen = simpleGenerator();
// Podemos hacer generadores infinitos.


function idMaker() {
  var id;
  return regeneratorRuntime.wrap(function idMaker$(_context2) {
    while (1) {
      switch (_context2.prev = _context2.next) {
        case 0:
          id = 1;

        case 1:
          if (!true) {
            _context2.next = 7;
            break;
          }

          _context2.next = 4;
          return id;

        case 4:
          id = id + 1;
          _context2.next = 1;
          break;

        case 7:
        case "end":
          return _context2.stop();
      }
    }
  }, _marked2);
} // Cuando llamamos next también podemos pasar valores que la función recibe.


function idMakerWithReset() {
  var id, reset;
  return regeneratorRuntime.wrap(function idMakerWithReset$(_context3) {
    while (1) {
      switch (_context3.prev = _context3.next) {
        case 0:
          id = 1;

        case 1:
          if (!true) {
            _context3.next = 8;
            break;
          }

          _context3.next = 4;
          return id;

        case 4:
          reset = _context3.sent;

          if (reset) {
            id = 1;
          } else {
            id = id + 1;
          }

          _context3.next = 1;
          break;

        case 8:
        case "end":
          return _context3.stop();
      }
    }
  }, _marked3);
} // Ahora hagamos un ejemplo un poco más complejo: la secuencia fibonacci


function fibonacci() {
  var a, b, nextNumber;
  return regeneratorRuntime.wrap(function fibonacci$(_context4) {
    while (1) {
      switch (_context4.prev = _context4.next) {
        case 0:
          a = 1;
          b = 1;

        case 2:
          if (!true) {
            _context4.next = 10;
            break;
          }

          nextNumber = a + b;
          a = b;
          b = nextNumber;
          _context4.next = 8;
          return nextNumber;

        case 8:
          _context4.next = 2;
          break;

        case 10:
        case "end":
          return _context4.stop();
      }
    }
  }, _marked4);
}</script>
  </body>
</html>
